<%args>
@filenames
$terms => ""
</%args>
% if (@filenames) {
<p> Search results for tags: <% $terms %></p>
<%perl>
  my $size = '96x96';
  my $tagr = new File::Tagr(config_dir => $File::Tagr::CONFIG_DIR, verbose => 0);
  for (my $i = 0; $i < @filenames; $i++) {
    my $filename = $filenames[$i];                       
    my $hash = $tagr->get_hash_of_file($filename);
    my ($image_file) = File::Tagr::Cache->get_image_from_cache($hash->detail(),
                                                               $filename, [$size]);
    my $last = @filenames - 1;
    my $param_str = "filename=$filename&terms=$terms&pos=$i&last=$last";
</%perl>
 <div style="float: left; height: 120px; width:120px;">
 <a href="/action/detail?<% $param_str %>">
   <img src="<% '/static/cache/' . $image_file %>"/></a>
 </div>
<%perl>
  }
</%perl>

% } else {
<p> No files found matching the tags: <% $terms %></p>
% }

% # print $c->response->body(Data::Dumper->Dump([$c]));

