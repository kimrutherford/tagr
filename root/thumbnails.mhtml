<%args>
@hashes
$terms => ""
</%args>
% if (@hashes) {
<p> Search results for tags: <% $terms %></p>
<%perl>
  my $size = '96x96';
  my $tagr = new File::Tagr(config_dir => $File::Tagr::CONFIG_DIR, verbose => 0);
  for (my $i = 0; $i < @hashes; $i++) {
    my $hash = $hashes[$i];
    my $image_file =
      (File::Tagr::Cache->get_image_from_cache($hash, [$size]))[0];

    if (!defined $image_file) {
      next;
    }

    my $last = @hashes - 1;
    my $digest = $hash->detail();
    my $param_str = "digest=$digest&terms=$terms&pos=$i&last=$last";
</%perl>
 <div style="float: left; height: 120px; width:120px;">
 <a href="/tagr/action/detail?<% $param_str %>">
   <img src="<% '/tagr/static/cache/' . $image_file %>"/></a>
 </div>
<%perl>
  }
</%perl>

% } else {
<p> No files found matching the tags: <% $terms %></p>
% }

% # print $c->response->body(Data::Dumper->Dump([$c]));

